#  <div align="center">Lithium Battery Recycle Blog </div>

\
&nbsp;

<p align="center">
<img src="static/template_images/logo.webp" alt="Lithium Battery Recycle Blog">
</p>

\
&nbsp;
## Introduction

Welcome to my repository that represnted Lithium Battery Recycle Blog website.
It is a blog website to share knowledge and increase learning about recycling lithium-ion battery.

<p align="center">
<img src="documentation/readme_images/amiresponsive.png" alt="amiresponsives">
</p>

The live to website: [Lithium Battery Recycle Blog website](https://lithium2023-734017e000a2.herokuapp.com/)

The link to GitHub Repository: [GitHub Repository](https://github.com/Ahmadalhindi/lithium-battery-recycle-blog)

\
&nbsp;

## Contents

- [Introduction](#introduction)
    - [dsdd](#my-adventures-in-northern-sweden)
  - [Site Objectives](#site-objectives)
- [User Experience/UX](#user-experienceux)
  - [Target Audience](#target-audience)
  - [User Stories](#user-stories)

\
&nbsp;

## Site Objectives
1. Share knowledge and increase learning about recycling lithium-ion battery.
2. Achieve the SDGs and sustainbility goals for the better green environment.
3. Encourage the social and friendly interactions between users.
4. Nonprofit website.

\
&nbsp;

# User Experience/UX

## Target Audience

- Users that are interested of gain more knowledge about recycle lithium-ion battery.
- Users that own electric vehicle / EV based on lithium-ion battery.
- Environmentalists who stand up for the environment and renewable energy.
- Investors who intersted to buy stocks from lithium battery recycle forms.
- People who can't afford to pay for membership in the website.

## User Stories

### User:

| <div align="center">#</div> | <div align="center">Title</div> |  <div align="center">User/Registerd user/Admin</div> | <div align="center">Content</div> | <div align="center">Label</div> |
| :------: | :------: | :------: | ------ | :------: |
| [2](https://github.com/Ahmadalhindi/lithium-battery-recycle-blog/issues/2) | View categories | User/Registerd User/Admin | I want to be able to view all the categories as default so that I can fast choose one particular category. | <span style="color:red">Must have</span> |
| [3](https://github.com/Ahmadalhindi/lithium-battery-recycle-blog/issues/3) | List the Categories | User/Registerd User/Admin | I want to be able to view the categories on navigation bar as buttons so that I can freely click on each category without leaving the category navigation bar in the home page. | <span style="color:green">Nice to have</span> |
| [4](https://github.com/Ahmadalhindi/lithium-battery-recycle-blog/issues/4) | View List Blog Posts | User/Registerd User/Admin | I want to view a list of all blog posts as default on the homepage so that I can fast select one to read. | <span  style="color:red">Must have</span> |
| [5](https://github.com/Ahmadalhindi/lithium-battery-recycle-blog/issues/5) | Site pagination | User/Registerd User/Admin | I want to view a paginated list of posts so that easily select post to view. | <span style="color:green">Nice to have</span>  |
| [6](https://github.com/Ahmadalhindi/lithium-battery-recycle-blog/issues/6) | View posts of each category in the same page | User/Registerd User/Admin | I want to view a list of blog posts of each category in the same page so that I can easily click on category links and see the corresponding blog posts in the same page. | <span style="color:green">Nice to have</span> |
| [7](https://github.com/Ahmadalhindi/lithium-battery-recycle-blog/issues/7) | Read Full Blog Post | User/Registerd User/Admin | I want to be able to click on a specific blog post so that I can access its complete content. | <span style="color:red">Must have</span> |
| [8](https://github.com/Ahmadalhindi/lithium-battery-recycle-blog/issues/8) | Manage blog posts | Admin | I want to be able to create, read, update and delete posts so that I can manage my posts if necessary. | <span style="color:red">Must have</span> |
| [9](https://github.com/Ahmadalhindi/lithium-battery-recycle-blog/issues/9) | Create draft posts | Admin | I want to be able to create draft posts so that I can freely complete writing the drafts the time I want. | <span style="color:yellow">Should have</span> |
| [10](https://github.com/Ahmadalhindi/lithium-battery-recycle-blog/issues/10) | Comment on Blog Posts | Registerd User/Admin | I want to be able to leave comments on blog posts so that I can engage on the post and share my thoughts. | <span style="color:red">Must have</span> |
| [11](https://github.com/Ahmadalhindi/lithium-battery-recycle-blog/issues/11) | Approve Comments | Admin | I want to be able to approve or disapprove comments on blog post so that I can ensure the quality of conversation on the site. | <span style="color:yellow">Should have</span> |
| [12](https://github.com/Ahmadalhindi/lithium-battery-recycle-blog/issues/12) | View comments | User/Registerd User/Admin | I want to be able to view comments on each post so that I can read the conversation. | <span style="color:red">Must have</span> |
| [13](https://github.com/Ahmadalhindi/lithium-battery-recycle-blog/issues/13) | View likes | User/Registerd User/Admin | I want to be able to see how many likes in post so that I can know how important this post. | <span style="color:red">Must have</span> |
| [14](https://github.com/Ahmadalhindi/lithium-battery-recycle-blog/issues/14) | Like/undo like Posts | Registerd User/Admin | I want to be able to like or Like/undo like for blog posts so that I can express my opinion on the content. | <span style="color:red">Must have</span> |
| [15](https://github.com/Ahmadalhindi/lithium-battery-recycle-blog/issues/15) | User Registration | User | I want to be able to sign up for a new account with a unique username and password so that I can comment and like. | <span style="color:red">Must have</span> |
| [16](https://github.com/Ahmadalhindi/lithium-battery-recycle-blog/issues/16) | Responsive Design | User/Registerd User/Admin | I want the blog site to be responsive as accessing from different devices so that I can easily surf and navigate the site on various screen sizes. | <span style="color:red">Must have</span> |
| [17](https://github.com/Ahmadalhindi/lithium-battery-recycle-blog/issues/16) | Search for blogs | User/Registerd User/Admin | Deleted - Issue not accomplish for lack of time | <span style="color:green">Nice to have</span> - Deleted |
| [18](https://github.com/Ahmadalhindi/lithium-battery-recycle-blog/issues/18) | Log in / Log out | Registerd User/Admin | I want to be able to log in and log out from my account so that I can interact with the blog and ensure the safety of my personal content when I log out. | <span style="color:red">Must have</span> |
| [19](https://github.com/Ahmadalhindi/lithium-battery-recycle-blog/issues/19) | Manage Categories | Admin | I want to be able to create, edit and delete categories so that I can organize and categorize posts effectively. | <span style="color:red">Must have</span> |

\
&nbsp;

# Entity-Relationship Diagram

<p align="center">
<img src="erd.png" alt="Entity-Relationship Diagram">
</p>

# Database Plan

## Category Model:

| <div align="center">Attribute</div> | <div align="center">Type</div> | <div align="center">Detail</div> | Key/Relation
|:-------------:|:-------------:|--------------|------------|
| name | str/char(100)    | The name of the category    | 

## Post Model:
| <div align="center">Attribute</div> | <div align="center">Type</div> | <div align="center">Detail</div> | <div align="center">Key/Relation</div>
|-------------|-------------|--------------|------------|
| title | str/char(200)    | The title of the post | 
| slug | str/char(200)    | A unique slug for the post's URL | 
| author | User | The author of the post | ForeignKey to User model
| category | Category | The category to which the post belongs | ForeignKey to Category model
| content | str/text   | The main content of the post | 
| featured_image | CloudinaryField | The featured image of the post | 
| likes | QuerySet | The users who liked the post | manytomany to User model |
| created_at | datetime | The timestamp when the post was created | 
| updated_at | datetime | The timestamp when the post was last updated | 
| status | int | The status of the post (Draft or Published) | 
| name | str/text | A short excerpt from the post | 

## Comment Model:
| <div align="center">Attribute</div> | <div align="center">Type</div> | <div align="center">Detail</div> | <div align="center">Key/Relation</div>
|-------------|-------------|--------------|------------|
| post | Post | The post to which the comment belongs | ForeignKey to Post model |
| name | str/char(90)    | The name of the commenter | 
| email | str/email | The email of the commenter |
| body | str/text | The content of the comment |
| created_at | datetime   | The timestamp when the comment was created | 
| approved | bool | Indicates whether the comment is approved or not |

\
&nbsp;

# Wireframes
- Home page:
<p align="center">
<img src="documentation/Wireframes/wireframe_home.png" alt="Entity-Relationship Diagram">
</p>

- Post-detail page:
<p align="center">
<img src="documentation/Wireframes/wireframe_post.png" alt="Entity-Relationship Diagram">
</p>

## Fonts
- Playfair Display: features a modernized version of past fonts that mimicked the styling of ink pens.
  - (Italic, 500) Used for heading h3, h4 

- Open Sans: focuses on neutrality and friendliness, one of the best choices for bloggers everywhere.
  - (500) Used for heading h2, h5
  - (400) Used for Paragraph

## Responsive Screens
The website deliver a consistent and user-friendly experience across a wide range of devices, contributing to improved usability and accessibility.


### Breakpoints
- **Desktop**: 992px and above
  - Navigation bar with visiblity for logo and all items and buttons
  - Grid layout adjusts to accommodate larger screen sizes.
- **Tablet**: 768px - 991px
  - Navigation bar: logo remains visible but items and buttons may collapsing to a hamburger drop down menu.
  - Blogs will be listed vertically.
- **Mobile**: Below 768px
  - Navigation bar: the Logo and the hamburger icon will vertically aligned.
  - Content stacks vertically for easier scrolling on smaller screens.

\
&nbsp;

# Features

## All pages
All pages of a website have a navigation bar, hero section and footer. The purpose is to enhance user experience, improve navigation, and provide consistent branding and functionality across the entire site.

### Navigation Bar
Intuitive, efficient and located in top of all pages for helping users find the information they're looking for quickly and easily.

<p align="center">
<img src="documentation/readme_images/nav_bar.png" alt="nav_bar">
</p>


- Logo: It is created as a brand image positioned at the left-hand side. Contains text that represent the name of the website and the letter "L" replaced by an icon to illustirate the recycling battery. Clicking on the logo directs users back to the homepage.


- Menu Items:
  - **Home Item**: Takes users back to the homepage.
  - **Category Item**: Clicking on it to list all the buttons of categories.
  - **Contact Item**: Leads to section that Offers contact information.

- Call to Action Buttons:
  - **Log in/Sign Up**: Smooth buttons positioned at the right-hand side. encouraging users to log in to existing accounts or sign up for new ones.

### Hero section:
A captivating image under navigation bar to give a visual Appeal and Contextual Information that grab visitors' attention to make a strong first impression, encourage visitors to explore further and convey the website's main message or value proposition succinctly.

<p align="center">
<img src="static/template_images/background.webp" alt="head_image">
</p>

### Footer
Enhancing the accessibility and credibility of a website by providing important information to visitors.
- **Social Media Bar**: Icons that allowing visitors to connect with the website on social media platforms.
- **Conact and About Us**: Give more information about the website and how to get in touch with us. 
- **Copyright**: This helps protect the intellectual property of the website owner. With link to the top of the page.

## Homepage
Our homepage is providing a snapshot of what the website offers and guiding users to explore further.
It contains the header and the footer that mentioned above, beside:

### Categories Section
It serves as a user-friendly way for visitors to explore the diverse range of content offered by the blog, facilitating easy navigation and discovery of articles that match their interests.

<p align="center">
<img src="documentation/readme_images/userstory2.png" alt="View Categories">
</p>

- **Layout and Placement**: it is positioned prominently on the homepage under header and arranged horizontally across it's navigation bar, allowing users to easily see and access them for quick navigation. It also reached by clicking in the category item in the navigation bar.
- **List all categories**: It displayed all automatically by default for easy access when openning the homepage for easy access.
- **Open Corresponding Posts**: When a user clicks on a specific category button, it opens up a corresponding section of the blog on the same page, providing a seamless browsing experience.

### Posts Section
The blog list section on a homepage serves as a dynamic showcase of the website's brief blog content, inviting visitors to delve deeper into the site and engage with its offerings.
<p align="center">
<img src="documentation/readme_images/userstory5_3.png" alt="View List Blog Posts">
</p>

- **List all Blog Posts**: It displayed all automatically by default when openning the homepage for easy access.
- **Pagination**: Diveded by 4 - Allowing visitors to easily navigate through multiple pages to view more blog posts.
- Each blog post include:
  - Thumbnail Image.
  - Author name.
  - Title.
  - Brief Excerpt.
  - Publication Date.
  - Read More button: to access the full post

<p align="center">
<img src="documentation/readme_images/single_blog.png" alt="Read Full Blog Post">
</p>

## Post Detail 
This page allows visitors to read the full blog post, and allows the registered users to interact with each other and with the admin by leave comments and likes.
- **Blog full display section**
  - Image
  - Title
  - Author
  - Content

<p align="center">
<img src="documentation/readme_images/postdetail_image_title.png  " alt="postdetail_image_title">
</p>

- **Like button icon**: Allows visitors to see the number of likes, and let registered users to like/undo like posts.

<p align="center">
<img src="documentation/readme_images/postdetail_like.png" alt="postdetail_like">
</p>


- **Comment icon**: Allows visitors to see the number of comments.

<p align="center">
<img src="documentation/readme_images/postdetail_comment-icon.png" alt="postdetail_comment-icon">
</p>

- **Comment section**:
For engage in discussions, share opinions, provide feedback, ask questions, or offer additional insights related to the blog content.

 The below picture displayed for visitors:

<p align="center">
<img src="documentation/readme_images/postdetail_comment_visitors.png" alt="postdetail_comment_visitors">
</p>

 The below picture displayed for registered users:

<p align="center">
<img src="documentation/readme_images/postdetail_comment_registeredusers.png" alt="postdetail_comment_registeredusers">
</p>

 The below picture displayed for the admin:

<p align="center">
<img src="documentation/readme_images/postdetail_comment_admin.png" alt="postdetail_comment_admin">
</p>

  - Display comments section: Allow visitors to see all comments with name of commneters and dates of commenting. Also let the registered users to delete their comments by clicking on red button.

  - Leave a comment section: Allows registered users to write a comment. But instead for visitor will display a welcoming message provided with a link to log in for leavivg a comment.

    Hint: The comment will not appear in the display comment section until the admin approve it.See the picture below:

<p align="center">
<img src="documentation/readme_images/postdetail_comment_approval.png" alt="Approve Comments">
</p>

- **Back button to same cayegory**: Button will allow users to go back to the same category that belong to the post.

<p align="center">
<img src="documentation/readme_images/postdetail_back_button.png" alt="postdetail_back_button">
</p>

## Sign Up
 Sign up Page considers as the entry point for new users to create accounts and access the platform's features like leave a comment, delete their own comment, or like a post.

 <p align="center">
<img src="documentation/readme_images/userstory15.png" alt="User Registration">
</p>

### Sign up Option
Provide a link to Sign in if the user already registered.
### Sign up Form
- Username
- Email (optional)
- Password
- Confirm Password

### Sign up Button
A button to submit the form.

### Error Messages and Validation:
If there are any errors in the sign-up form, such as missing fields, invalid input the page displays clear error messages indicating what went wrong and how the user can correct it.

Below pictures refer such example error messages:

<p align="center">
<img src="documentation/readme_images/signup_validation_username.png" alt="signup_validation_username">
</p>

<p align="center">
<img src="documentation/readme_images/signup_validation_password.png" alt="signup_validation_password">
</p>

### Confirmation Message:
After successfully signing up, a confirmation message be displayed to inform users that they have been registered.

This message will auto close with timeout after 2 seconds.

## Sign In 
This page will allow users to access their accounts or create new ones to interact with the site's content, such leave a comment or like a post.

<p align="center">
<img src="documentation/readme_images/signin.png" alt="signin">
</p>

### Sign in Option
Provide a link to Sign up if the user not registered yet.

### Sign in Form
- Username
- Password
- "Remember Me" Option

### Error Messages and Validation:
If there are any errors in the sign in form, such as missing fields, invalid input or incorrect the page displays clear error messages indicating what went wrong and how the user can correct it.

Below picture refers example error message:

<p align="center">
<img src="documentation/readme_images/signin_validation.png" alt="signin_validation">
</p>

### Confirmation Message
After successfully signing in, a confirmation message displayed to inform users that they have been logged in.

This message will auto close with timeout after 2 seconds.

<p align="center">
<img src="documentation/readme_images/userstory18_1.png" alt="Log in/Log out">
</p>

## Sign Out
Sign out Page considers as the endpoint for registered users who wish to log out of their accounts.

<p align="center">
<img src="documentation/readme_images/userstory18_2.png" alt="Log in/Log out">
</p>

- **Log out Button**: located in the navigation bar at the homepage.
- **Confirmation Page**: A new page displaying confirmation message asking logged in user if they want to log out by clicking the red button.
- **Confirmation Message**: After successfully signing out, a confirmation message displayed to inform logged in users that they have been logged out.
This message will auto close with timeout after 2 seconds.

<p align="center">
<img src="documentation/readme_images/userstory18_3.png" alt="Log in/Log out">
</p>

\
&nbsp;

# Technologies Used

## Languages
- [HTML5](https://en.wikipedia.org/wiki/HTML "HTML")
- [CSS3](https://en.wikipedia.org/wiki/CSS "CSS")
- [JavaScript](https://en.wikipedia.org/wiki/JavaScript "JavaScript")
- [Python]( https://en.wikipedia.org/wiki/Python_(programming_language) "Python") 
## Frameworks 
- [Django3.2.23](https://www.djangoproject.com/ "Django")
- [Bootstrap5](https://getbootstrap.com/ "Bootstrap")

## Libraries and Tools
- [cloudinary](https://cloudinary.com/ "cloudinary") - Used to store website's images.
- [elephandSQL](https://www.elephantsql.com/) Used to store and manage PostgreSQL database.
- [gitpod](https://www.gitpod.io/ "gitpod") – Used as the development to build the page.
- [gitHub](https://github.com/ "gitHub") – The project’s Version Control Management System.
- [google fonts](https://fonts.google.com/ "google Fonts") – For fonts used in the site.
- [psycopg2](https://pypi.org/project/psycopg2/ "google Fonts") – Is the popular PostgreSQL adapter used in  Python.
- [gunicorn](https://gunicorn.org/ "gunicorn") Allows to run multiple Python processes within a single dyno
- [crispy-forms](https://django-crispy-forms.readthedocs.io/en/latest/ "crispy-forms") – Control the rendering behavior of Django forms.
- [django-extensions](https://pypi.org/project/django-extensions/ "django-extensions") - Add functionality to the project.
- [django-allauth](https://docs.allauth.org/en/latest/ "django-allauth") Addressing authentication, registration, account management as well as 3rd party (social) account authentication.
- [django-summernote](https://github.com/summernote/django-summernote/blob/main/README.md "django-summernote") Support admin mixins and widgets.
- [graphviz](https://graphviz.org/ "Graphviz") Set of tools for visualizing graph data, ERD in our project.
- [pyparsing](https://pypi.org/project/pyparsing/ "pyparsing") Library for parsing text strings.
- [pydot](https://pypi.org/project/pydot/ "pydot") Library for creating, manipulating, and visualizing graphs in DOT format.
- [looka](https://looka.com/ "lookas") – Create and design the logo.
- [font awesome](https://looka.com/ "font awesome") – A robust icon set that contains scalable vector icons.
- [Heroku](https://id.heroku.com/ "Heroku") Used to deploy the project.

## Validation and Auto-test Websites
- [w3c HTML Validation Service](https://validator.w3.org/ "W3C HTML") – To validate HTML files.
- [jigsaw-w3 CSS Validation Service](https://jigsaw.w3.org/css-validator/ "W3C CSS") – To validate the CSS files.
- [jSHint](https://jshint.com/ "JSHint") – To validate JavaScript files.
- [python Syntax Checker PEP8](https://www.pythonchecker.com/ "Python Syntax Checker PEP8") – To validate all the Python files, making sure they align with PEP8.
- [lighthouse](https://chrome.google.com/webstore/detail/lighthouse/blipmdconlkpinefehnmjammfjpmpbjk?hl=en "Lighthouse") – To check the website’s performance and accessibility. Improving the quality of web pages.

\
&nbsp;

# Test

## Manual Test
Click on provided link to visit the [manual test](readme_manual_test.md) page.

## Responsive Screens Test
Testing is conducted on various devices including desktops, laptops, tablets, and smartphones.

## Code Validation

### W3C Markup HTML Validator
Tested for homepage by W3c HTML Markup validation service and fixed the trailing slash and subtree errors. Then passed with noe more errors.

<p align="center">
<img src="documentation/readme_images/html-validation.png" alt="html-validation">
</p>

And tested for all other pages and passed, except one error in the post_detail template is not fixed, the element "p end tag" located inside the root of Django.

<p align="center">
<img src="documentation/readme_images/html-validation-error.png" alt="html-validation-error">
</p>

### Jigsaw W3 CSS Validator
CSS tested by Jigsaw W3 CSS Validaton service and passed with no errors.

<p align="center">
<img src="documentation/readme_images/css-validation.png" alt="css-validator">
</p>

But found 8 warnings about vendor extension, that no harm if not fix it.

### JS Hint
Tested JavaScript code with only two warnings.

<p align="center">
<img src="documentation/readme_images/jshint_validator.png" alt="jshint_validator">
</p>

Tested again after fix it, and passed with no more warnings.

<p align="center">
<img src="documentation/readme_images/jshint_warnings.png" alt="jshint_warnings">
</p>

### PEP8 CI Python checker
All python files tested with no errors, exept for one error in views for long line:

<p align="center">
<img src="documentation/readme_images/pep8ci.png" alt="PEP8 CI Python checker">
</p>

### Lighthouse

The website performed well when it came to the lighthouse test.

<p align="center">
<img src="documentation/readme_images/lighthouse.png" alt="lighthouse">
</p>

\
&nbsp;

# Bugs

## Fixed Bugs
- **The draft post keep displaying in the site**:

  To prevent draft posts from appearing in the site:
  
  views.py - in PostListView class by replace the queryset variable at get_queryset function and return it to get all posts or posts with specified category that filtered by statue as published and date created.

- **ModuleNotFoundError: No module named 'django_extensions'**

  Debug it by adding the module to requirements.txt file.

- **favicon.ico not found when deploying to Heroku**

  Debug it by creating a blank favicon.ico file in static folder.

## Unfixed Bugs
- The posts not sorted by date created.
- Uncaught (in promise) Error: A listener indicated an asynchronous response by returning true, but the message channel closed before a response was received

\
&nbsp;

# Deployment

## Create Heroku Application

-  Log in to Heroku account.
- Create new application by click on **new** button then select **Create new app**.
- Write application name then select the region then click on **Create App**.

## ElephantSQL & Cloudinary
- Log in to ElephantSQL.
- Make a new instance.
- Copy the URL to use it for the further step.

## Create Django Blank project and app with environment
- Install django gunicorn and its libraries psycopg2 and cloudinary-storage.
- Add those libraries to requirements.txt
- Create the project name.
- Create the app name, then add it to settings.py
- Migrate the changes and push it.
- Write application name then select the region then click on **Create App**.
- add the DATABASE_URL, SECRET_KEY & CLOUDINARY_URL to the settings.py file
- Add the values of SECRET_KEY, DATABASE_URL and CLOUDINARY_URL keys at env.py and setting files.
- Create import os statement for the env.py 
- Add Heroku ALLOWED_HOSTS with localhost in settings.py
- Created the Procfile and integrate it with the project.
- Make add, commit and Push the changes to Github.

## Heroku Deployment
- log in again and select the heroku app you created.
- Settings tab, then at Config Vars add those:
  - key: PORT | value: 8000
  - key: SECRET_KEY | value: Django Secret Key from settings.py
  - key: CLOUDINARY_URL | value: Cloudinary API URL
  - key: DATABASE_URL | value: ElephantSQL database URL
-  Deploy tab to connect up with github account
- connect up to the repository.
- Click on deploy button.

Well done to deploy your application!

